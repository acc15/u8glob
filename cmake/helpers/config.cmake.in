@PACKAGE_INIT@

include(${CMAKE_CURRENT_LIST_DIR}/@target@-targets.cmake)

#[[
if(WIN32)
    function(copy_dll_to_target_dir dll_target target)
        add_custom_command(
            TARGET ${target}
            POST_BUILD
            COMMAND ${CMAKE_COMMAND} -E copy_if_different 
                $<TARGET_FILE:${dll_target}> 
                $<TARGET_FILE_DIR:${target}>
        )
    endfunction()

    function(copy_dll_to_executables dll_target) 
        get_directory_property(dir_targets BUILDSYSTEM_TARGETS)
        foreach(target "${dir_targets}")
            get_target_property(target_type ${target} TYPE)
            if(target_type STREQUAL EXECUTABLE)
                get_target_property(target_libs ${target} LINK_LIBRARIES)
                if(${dll_target} IN_LIST target_libs)
                    copy_dll_to_target_dir(${dll_target} ${target})
                endif()
            endif()
        endforeach()
    endfunction()

    cmake_language(DEFER CALL copy_dll_to_executables u8glob::u8glob)
endif()
]]

check_required_components(u8glob)